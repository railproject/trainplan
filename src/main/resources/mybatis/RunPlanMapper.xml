<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace必须指向Dao接口 -->
<mapper namespace="org.railway.com.trainplan.repository.mybatis.RunPlanDao">

	<select id="findRunPlan" parameterType="map" resultType="map">
        SELECT TR.PLAN_TRAIN_ID AS PLAN_TRAIN_ID, TR.TRAIN_NBR AS TRAIN_NBR, TR.START_STN AS START_STN, TR.END_STN AS END_STN, TR.RUN_DATE AS RUN_DATE,
        TR.DAILYPLAN_FLAG AS DAILYPLAN_FLAG, TR.DAILYPLAN_TIME AS DAILYPLAN_TIME, TR.HIGHLINE_FLAG AS HIGHLINE_FLAG
        FROM PLAN_TRAIN TR WHERE TR.START_BUREAU = ${bureau} AND TR.RUN_DATE = ${date}
	</select>

    <select id="findRunPlanStnByTrain" parameterType="string" resultType="map">
        SELECT T.PLAN_TRAIN_STN_ID AS PLAN_TRAIN_STN_ID, T.STN_NAME AS STN_NAME,
        T.ARR_TIME AS ARR_TIME, T.DPT_TIME AS DPT_TIME, T.TRACK_NAME AS TRACK_NAME,
        T.PSG_FLG AS PSG_FLG, T.STN_BUREAU AS STN_BUREAU
        FROM PLAN_TRAIN_STN T WHERE T.PLAN_TRAIN_ID = #{train_id} ORDER BY T.STN_SORT
    </select>
</mapper> 
